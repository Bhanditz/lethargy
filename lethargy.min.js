"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(t[a]=s[a])}return t},_createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var a=e[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,s,a){return s&&t(e.prototype,s),a&&t(e,a),e}}(),Lethargy=function(){function t(e){_classCallCheck(this,t);var s={stability:8,sensitivity:100,tolerance:1.1,delay:150};this.opts=_extends({},s,e),this.lastUpDeltas=new Array(2*this.opts.stability).fill(null),this.lastDownDeltas=new Array(2*this.opts.stability).fill(null),this.deltasTimestamp=new Array(2*this.opts.stability).fill(null)}return _createClass(t,[{key:"handleEvent",value:function(e){var s=t.extractWheelDelta(e.originalEvent||e);return this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),s>0?(this.lastUpDeltas.push(s),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(s),this.lastDownDeltas.shift(),this.isInertia(-1))}},{key:"isInertia",value:function(t){var e=-1===t?this.lastDownDeltas:this.lastUpDeltas;if(null===e[0])return t;if(this.deltasTimestamp[2*this.opts.stability-2]+this.opts.delay>Date.now()&&e[0]===e[2*this.opts.stability-1])return!1;var s=e.slice(0,this.opts.stability),a=e.slice(this.opts.stability,2*this.opts.stability),i=s.reduce(function(t,e){return t+e}),l=a.reduce(function(t,e){return t+e}),n=i/s.length,r=l/a.length;return Math.abs(n)<Math.abs(r*this.opts.tolerance)&&this.opts.sensitivity<Math.abs(r)&&t}},{key:"showLastUpDeltas",value:function(){return this.lastUpDeltas}},{key:"showLastDownDeltas",value:function(){return this.lastDownDeltas}}],[{key:"extractWheelDelta",value:function(t){var e=void 0;return null!=t.wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),e}}]),t}();